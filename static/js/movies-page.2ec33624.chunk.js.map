{"version":3,"sources":["components/SearchBar/SearchBar.module.css","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/SearchBar/SearchBar.js","components/LoadMoreBtn/LoadMoreBtn.jsx","views/MoviesPage/MoviesPage.jsx"],"names":["module","exports","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","SearchBar","onSearch","className","onSubmit","e","preventDefault","elements","pictureName","value","toLowerCase","type","name","autoComplete","autoFocus","placeholder","LoadMoreBtnClick","onClick","MoviesPage","url","useRouteMatch","history","useHistory","location","useLocation","useState","movies","setMovies","setSearchName","page","setPage","searchQuery","URLSearchParams","search","get","checkLocation","state","useEffect","MovieApi","then","data","results","toast","error","prevMovies","window","scrollTo","top","document","documentElement","scrollHeight","behavior","showButton","searchName","map","movie","to","pathname","id","src","poster_path","alt","original_title","LoadMoreBtn","prevPage"],"mappings":"4HACAA,EAAOC,QAAU,CAAC,mBAAmB,oCAAoC,oBAAoB,uC,2FCC7F,SAASC,EAAQC,EAAQC,GACvB,IAAIC,EAAOC,OAAOD,KAAKF,GAEvB,GAAIG,OAAOC,sBAAuB,CAChC,IAAIC,EAAUF,OAAOC,sBAAsBJ,GACvCC,IAAgBI,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAEtDP,EAAKQ,KAAKC,MAAMT,EAAMG,GAGxB,OAAOH,EAGM,SAASU,EAAeC,GACrC,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAE/CA,EAAI,EACNf,EAAQI,OAAOc,IAAS,GAAMC,SAAQ,SAAUC,GAC9C,OAAAC,EAAA,GAAeP,EAAQM,EAAKF,EAAOE,OAE5BhB,OAAOkB,0BAChBlB,OAAOmB,iBAAiBT,EAAQV,OAAOkB,0BAA0BJ,IAEjElB,EAAQI,OAAOc,IAASC,SAAQ,SAAUC,GACxChB,OAAOiB,eAAeP,EAAQM,EAAKhB,OAAOK,yBAAyBS,EAAQE,OAKjF,OAAON,E,wBC7BM,SAASU,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAAO,OAAAG,EAAA,GAAiBH,GDGzC,CAAkBA,IELZ,SAA0BI,GACvC,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAY3B,OAAOyB,GAAO,OAAOH,MAAMM,KAAKH,GFIvD,CAAgBJ,IAAQ,OAAAQ,EAAA,GAA2BR,IGLvE,WACb,MAAM,IAAIS,UAAU,wIHIwE,G,kCIwB/EC,EA3BG,SAAC,GAAiB,IAAfC,EAAc,EAAdA,SAMnB,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMA,UAAU,aAAaC,SAPZ,SAAAC,GACnBA,EAAEC,iBACFJ,EAASG,EAAEzB,OAAO2B,SAASC,YAAYC,MAAMC,gBAK3C,UACE,wBAAQC,KAAK,SAASR,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVQ,KAAK,OACLC,KAAK,cACLC,aAAa,MACbC,WAAS,EACTC,YAAY,mC,8BCVPC,MAVf,YAAwC,IAAZC,EAAW,EAAXA,QAC1B,OACE,8BACA,wBAAQN,KAAK,SAASM,QAASA,EAA/B,0B,QCeW,SAASC,IAAc,IAAD,EAC3BC,EAAQC,cAARD,IACFE,EAAUC,cACVC,EAAWC,cAEjB,EAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAoCF,mBAAS,IAA7C,mBAAmBG,GAAnB,WACA,EAAwBH,mBAAS,GAAjC,mBAAOI,EAAP,KAAaC,EAAb,KACMC,EAAW,UAAG,IAAIC,gBAAgBT,EAASU,QAAQC,IAAI,gBAA5C,QAAwD,GACrEC,EAAgB,WAClB,IAAQC,EAAUb,EAAVa,MACR,OAAY,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAOtC,MAAOsC,EAAMtC,KAAO,IAEpCuC,qBAAU,WACHN,GAELO,IAA0BP,EAAaF,GAAMU,MAAK,SAAAC,GAChD,OAA4B,IAAxBA,EAAKC,QAAQ1D,OACR2D,IAAMC,MAAN,8CACkCZ,GACvCJ,EAAU,KAGVa,EAAKC,QACAd,EAAUa,EAAKC,UAGxBd,GAAU,SAAAiB,GAAU,kBAAQA,GAAR,EAAuBJ,EAAKC,kBAChDZ,EAAO,GACLgB,OAAOC,SAAS,CACdC,IAAKC,SAASC,gBAAgBC,aAC9BC,SAAU,kBAGf,CAACtB,EAAME,IAEV,IASMqB,EAAa1B,EAAO3C,OAAS,GAEnC,OACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAWmB,SAbM,SAAAmD,GACnBzB,EAAcyB,GACdhC,EAAQ5C,KAAR,OAAkB8C,GAAlB,IAA4BU,OAAO,SAAD,OAAWoB,SAY1C3B,GACC,cAAC,IAAD,UACGA,EAAO4B,KAAI,SAAAC,GAAK,aACf,eAAC,IAAD,WACE,cAAC,IAAD,CACEC,GAAI,CACFC,SAAS,GAAD,OAAKtC,EAAL,YAAYoC,EAAMG,IAC1BtB,MAAO,CAAEtC,KAAMqC,MAHnB,SAME,cAAC,IAAD,CACEwB,IAAG,0CAAqCJ,EAAMK,aAC9CC,IAAG,UAAEN,EAAMO,sBAAR,QAA0BP,EAAM3C,SAGvC,eAAC,IAAD,WACG2C,EAAM3C,MAAQ2C,EAAM3C,KACpB2C,EAAMO,oBAdMP,EAAMG,SAoB5BN,GAAc,cAACW,EAAD,CAAkB9C,QAhCZ,WACvBa,GAAQ,SAAAkC,GAAQ,OAAIA,EAAW","file":"static/js/movies-page.2ec33624.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm-input\":\"SearchBar_SearchForm-input__1WKje\",\"SearchForm-button\":\"SearchBar_SearchForm-button__3_Yft\"};","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import PropTypes from 'prop-types';\nimport './SearchBar.module.css';\nconst SearchBar = ({ onSearch}) => {\n  const handleSearch = e => {\n    e.preventDefault();\n    onSearch(e.target.elements.pictureName.value.toLowerCase());\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" onSubmit={handleSearch} >\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          name=\"pictureName\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        \n        />\n      </form>\n    </header>\n  );\n};\n\nexport default SearchBar;\n\nSearchBar.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\nfunction LoadMoreBtnClick({ onClick }) {\n  return (\n    <div>\n    <button type=\"button\" onClick={onClick}>\n      Load more\n      </button>\n      </div>\n  );\n}\n\nexport default LoadMoreBtnClick;\n\nLoadMoreBtnClick.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};","import { useEffect, useState } from 'react';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport * as MovieApi from '../../services/movie-api';\nimport {\n  NavLink,\n  useRouteMatch,\n  useHistory,\n  useLocation,\n} from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport LoadMoreBtnClick from '../../components/LoadMoreBtn/LoadMoreBtn';\nimport {\n  Container,\n  MovieItems,\n  Poster,\n  Title,\n  Ul,\n} from '../HomePage/HomePage.styled';\n\nexport default function MoviesPage() {\n  const { url } = useRouteMatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  const [movies, setMovies] = useState([]);\n  const [searchName, setSearchName] = useState('');\n  const [page, setPage] = useState(1);\n  const searchQuery = new URLSearchParams(location.search).get('query') ?? '';\nconst checkLocation = () => {\n    const { state } = location;\n    return state?.from ? state.from : '';\n   };\n  useEffect(() => {\n    if (!searchQuery) return;\n\n    MovieApi.fetchMovieByName(searchQuery, page).then(data => {\n      if (data.results.length === 0) {\n        return toast.error(\n          `Sorry, but there are no movie with  ${searchQuery}`,\n          setMovies([]),\n        );\n      }\n      if (data.results) {\n        return setMovies(data.results);\n      }\n\n      setMovies(prevMovies => [...prevMovies, ...data.results]);\n      page > 1 &&\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n    });\n  }, [page, searchQuery]);\n\n  const handleSubmit = searchName => {\n    setSearchName(searchName);\n    history.push({ ...location, search: `query=${searchName}` });\n  };\n\n  const loadMoreBtnClick = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  const showButton = movies.length > 20;\n\n  return (\n    <Container>\n      <SearchBar onSearch={handleSubmit} />\n      {movies && (\n        <Ul>\n          {movies.map(movie => (\n            <MovieItems key={movie.id}>\n              <NavLink\n                to={{\n                  pathname: `${url}/${movie.id}`,\n                  state: { from: checkLocation() },\n                }}\n              >\n                <Poster\n                  src={`https://image.tmdb.org/t/p/w500/${movie.poster_path}`}\n                  alt={movie.original_title ?? movie.name}\n                />\n              </NavLink>\n              <Title>\n                {movie.name && movie.name}\n                {movie.original_title}\n              </Title>\n            </MovieItems>\n          ))}\n        </Ul>\n      )}\n      {showButton && <LoadMoreBtnClick onClick={loadMoreBtnClick} />}\n    </Container>\n  );\n}\n"],"sourceRoot":""}